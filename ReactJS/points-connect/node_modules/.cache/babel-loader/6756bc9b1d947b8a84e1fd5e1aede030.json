{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\ZDLaP\\\\Desktop\\\\ReactProject\\\\connect\\\\ReactJS\\\\points-connect\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\ZDLaP\\\\Desktop\\\\ReactProject\\\\connect\\\\ReactJS\\\\points-connect\\\\src\\\\views\\\\addEvent.jsx\";\nimport React, { Component } from 'react';\nimport { signup, checkUsernameAvailability, checkEmailAvailability } from '../util/APIUtils';\nimport '../assets/css/Signup.css';\nimport { Link } from 'react-router-dom';\nimport { NAME_MIN_LENGTH, NAME_MAX_LENGTH, USERNAME_MIN_LENGTH, USERNAME_MAX_LENGTH, EMAIL_MAX_LENGTH, PASSWORD_MIN_LENGTH, PASSWORD_MAX_LENGTH } from '../constants';\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.validateContenu = name => {\n      if (name.length < NAME_MIN_LENGTH) {\n        return {\n          validateStatus: 'error',\n          errorMsg: \"Name is too short (Minimum \".concat(NAME_MIN_LENGTH, \" characters needed.)\")\n        };\n      } else if (name.length > NAME_MAX_LENGTH) {\n        return {\n          validationStatus: 'error',\n          errorMsg: \"Name is too long (Maximum \".concat(NAME_MAX_LENGTH, \" characters allowed.)\")\n        };\n      } else {\n        return {\n          validateStatus: 'success',\n          errorMsg: null\n        };\n      }\n    };\n\n    this.validateDate = email => {\n      if (!email) {\n        return {\n          validateStatus: 'error',\n          errorMsg: 'Email may not be empty'\n        };\n      }\n\n      const EMAIL_REGEX = RegExp('[^@ ]+@[^@ ]+\\\\.[^@ ]+');\n\n      if (!EMAIL_REGEX.test(email)) {\n        return {\n          validateStatus: 'error',\n          errorMsg: 'Email not valid'\n        };\n      }\n\n      if (email.length > EMAIL_MAX_LENGTH) {\n        return {\n          validateStatus: 'error',\n          errorMsg: \"Email is too long (Maximum \".concat(EMAIL_MAX_LENGTH, \" characters allowed)\")\n        };\n      }\n\n      return {\n        validateStatus: null,\n        errorMsg: null\n      };\n    };\n\n    this.validateDescription = username => {\n      if (username.length < USERNAME_MIN_LENGTH) {\n        return {\n          validateStatus: 'error',\n          errorMsg: \"Username is too short (Minimum \".concat(USERNAME_MIN_LENGTH, \" characters needed.)\")\n        };\n      } else if (username.length > USERNAME_MAX_LENGTH) {\n        return {\n          validationStatus: 'error',\n          errorMsg: \"Username is too long (Maximum \".concat(USERNAME_MAX_LENGTH, \" characters allowed.)\")\n        };\n      } else {\n        return {\n          validateStatus: null,\n          errorMsg: null\n        };\n      }\n    };\n\n    this.validatePassword = password => {\n      if (password.length < PASSWORD_MIN_LENGTH) {\n        return {\n          validateStatus: 'error',\n          errorMsg: \"Password is too short (Minimum \".concat(PASSWORD_MIN_LENGTH, \" characters needed.)\")\n        };\n      } else if (password.length > PASSWORD_MAX_LENGTH) {\n        return {\n          validationStatus: 'error',\n          errorMsg: \"Password is too long (Maximum \".concat(PASSWORD_MAX_LENGTH, \" characters allowed.)\")\n        };\n      } else {\n        return {\n          validateStatus: 'success',\n          errorMsg: null\n        };\n      }\n    };\n\n    this.state = {\n      name: {\n        value: ''\n      },\n      username: {\n        value: ''\n      },\n      email: {\n        value: ''\n      },\n      password: {\n        value: ''\n      }\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.isFormInvalid = this.isFormInvalid.bind(this);\n  }\n\n  handleInputChange(event, validationFun) {\n    const target = event.target;\n    const inputName = target.name;\n    const inputValue = target.value;\n    this.setState({\n      [inputName]: _objectSpread({\n        value: inputValue\n      }, validationFun(inputValue))\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const signupRequest = {\n      name: this.state.name.value,\n      email: this.state.email.value,\n      username: this.state.username.value,\n      password: this.state.password.value\n    };\n    signup(signupRequest).then(response => {\n      notification.success({\n        message: 'Polling App',\n        description: \"Thank you! You're successfully registered. Please Login to continue!\"\n      });\n      this.props.history.push(\"/login\");\n    }).catch(error => {\n      notification.error({\n        message: 'Polling App',\n        description: error.message || 'Sorry! Something went wrong. Please try again!'\n      });\n    });\n  }\n\n  isFormInvalid() {\n    return !(this.state.name.validateStatus === 'success' && this.state.username.validateStatus === 'success' && this.state.email.validateStatus === 'success' && this.state.password.validateStatus === 'success');\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"signup-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Ajout d'un \\xE9v\\xE9nement ou actualit\\xE9\"), React.createElement(\"div\", {\n      className: \"signup-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      className: \"signup-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(FormItem, {\n      label: \"Titre :\",\n      validateStatus: this.state.titre.validateStatus,\n      help: this.state.titre.errorMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Input, {\n      size: \"large\",\n      name: \"title\",\n      autoComplete: \"off\",\n      placeholder: \"Titre ...\",\n      value: this.state.name.value,\n      onChange: event => this.handleInputChange(event, this.validateTitle),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    })), React.createElement(FormItem, {\n      label: \"Description :\",\n      validateStatus: this.state.description.validateStatus,\n      help: this.state.description.errorMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Input, {\n      size: \"large\",\n      name: \"description\",\n      autoComplete: \"off\",\n      placeholder: \"description ...\",\n      value: this.state.name.value,\n      onChange: event => this.handleInputChange(event, this.validateDescription),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(FormItem, {\n      label: \"Contenu :\",\n      validateStatus: this.state.content.validateStatus,\n      help: this.state.content.errorMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Input.TextArea, {\n      size: \"large\",\n      name: \"content\",\n      autoComplete: \"off\",\n      placeholder: \"Le contenu complet ...\",\n      value: this.state.name.value,\n      onChange: event => this.handleInputChange(event, this.validateContenu),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(FormItem, {\n      label: \"Date de cloture :\",\n      validateStatus: this.state.date.validateStatus,\n      help: this.state.date.errorMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Input.Date, {\n      size: \"large\",\n      name: \"date\",\n      autoComplete: \"off\",\n      placeholder: \"La date de cloture de cet \\xE9v\\xE9nement ...\",\n      value: this.state.date.value,\n      onChange: event => this.handleInputChange(event, this.validateDate),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })), React.createElement(FormItem, {\n      label: \"Image :\",\n      validateStatus: this.state.file.validateStatus,\n      help: this.state.file.errorMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Input.File, {\n      size: \"large\",\n      name: \"date\",\n      autoComplete: \"off\",\n      placeholder: \"Image de dimension 1280x720px ...\",\n      value: this.state.file.value,\n      onChange: event => this.handleInputChange(event, this.validateFile),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), React.createElement(FormItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      size: \"large\",\n      className: \"signup-form-button\",\n      disabled: this.isFormInvalid(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Sign up\"), \"Already registed? \", React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Login now!\")))));\n  } // Validation Functions\n\n\n  validateFile() {\n    // First check for client side errors in username\n    const usernameValue = this.state.username.value;\n    const usernameValidation = this.validateUsername(usernameValue);\n\n    if (usernameValidation.validateStatus === 'error') {\n      this.setState({\n        username: _objectSpread({\n          value: usernameValue\n        }, usernameValidation)\n      });\n      return;\n    }\n\n    this.setState({\n      username: {\n        value: usernameValue,\n        validateStatus: 'validating',\n        errorMsg: null\n      }\n    });\n    checkUsernameAvailability(usernameValue).then(response => {\n      if (response.available) {\n        this.setState({\n          username: {\n            value: usernameValue,\n            validateStatus: 'success',\n            errorMsg: null\n          }\n        });\n      } else {\n        this.setState({\n          username: {\n            value: usernameValue,\n            validateStatus: 'error',\n            errorMsg: 'This username is already taken'\n          }\n        });\n      }\n    }).catch(error => {\n      // Marking validateStatus as success, Form will be recchecked at server\n      this.setState({\n        username: {\n          value: usernameValue,\n          validateStatus: 'success',\n          errorMsg: null\n        }\n      });\n    });\n  }\n\n  validateEmailAvailability() {\n    // First check for client side errors in email\n    const emailValue = this.state.email.value;\n    const emailValidation = this.validateEmail(emailValue);\n\n    if (emailValidation.validateStatus === 'error') {\n      this.setState({\n        email: _objectSpread({\n          value: emailValue\n        }, emailValidation)\n      });\n      return;\n    }\n\n    this.setState({\n      email: {\n        value: emailValue,\n        validateStatus: 'validating',\n        errorMsg: null\n      }\n    });\n    checkEmailAvailability(emailValue).then(response => {\n      if (response.available) {\n        this.setState({\n          email: {\n            value: emailValue,\n            validateStatus: 'success',\n            errorMsg: null\n          }\n        });\n      } else {\n        this.setState({\n          email: {\n            value: emailValue,\n            validateStatus: 'error',\n            errorMsg: 'This Email is already registered'\n          }\n        });\n      }\n    }).catch(error => {\n      // Marking validateStatus as success, Form will be recchecked at server\n      this.setState({\n        email: {\n          value: emailValue,\n          validateStatus: 'success',\n          errorMsg: null\n        }\n      });\n    });\n  }\n\n}\n\nexport default Signup;","map":{"version":3,"sources":["C:\\Users\\ZDLaP\\Desktop\\ReactProject\\connect\\ReactJS\\points-connect\\src\\views\\addEvent.jsx"],"names":["React","Component","signup","checkUsernameAvailability","checkEmailAvailability","Link","NAME_MIN_LENGTH","NAME_MAX_LENGTH","USERNAME_MIN_LENGTH","USERNAME_MAX_LENGTH","EMAIL_MAX_LENGTH","PASSWORD_MIN_LENGTH","PASSWORD_MAX_LENGTH","Signup","constructor","props","validateContenu","name","length","validateStatus","errorMsg","validationStatus","validateDate","email","EMAIL_REGEX","RegExp","test","validateDescription","username","validatePassword","password","state","value","handleInputChange","bind","handleSubmit","isFormInvalid","event","validationFun","target","inputName","inputValue","setState","preventDefault","signupRequest","then","response","notification","success","message","description","history","push","catch","error","render","titre","validateTitle","content","date","file","validateFile","usernameValue","usernameValidation","validateUsername","available","validateEmailAvailability","emailValue","emailValidation","validateEmail"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { signup, checkUsernameAvailability, checkEmailAvailability } from '../util/APIUtils';\r\nimport '../assets/css/Signup.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { \r\n    NAME_MIN_LENGTH, NAME_MAX_LENGTH, \r\n    USERNAME_MIN_LENGTH, USERNAME_MAX_LENGTH,\r\n    EMAIL_MAX_LENGTH,\r\n    PASSWORD_MIN_LENGTH, PASSWORD_MAX_LENGTH\r\n} from '../constants';\r\n\r\nclass Signup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: {\r\n                value: ''\r\n            },\r\n            username: {\r\n                value: ''\r\n            },\r\n            email: {\r\n                value: ''\r\n            },\r\n            password: {\r\n                value: ''\r\n            }\r\n        }\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.isFormInvalid = this.isFormInvalid.bind(this);\r\n    }\r\n\r\n    handleInputChange(event, validationFun) {\r\n        const target = event.target;\r\n        const inputName = target.name;        \r\n        const inputValue = target.value;\r\n\r\n        this.setState({\r\n            [inputName] : {\r\n                value: inputValue,\r\n                ...validationFun(inputValue)\r\n            }\r\n        });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n    \r\n        const signupRequest = {\r\n            name: this.state.name.value,\r\n            email: this.state.email.value,\r\n            username: this.state.username.value,\r\n            password: this.state.password.value\r\n        };\r\n        signup(signupRequest)\r\n        .then(response => {\r\n            notification.success({\r\n                message: 'Polling App',\r\n                description: \"Thank you! You're successfully registered. Please Login to continue!\",\r\n            });          \r\n            this.props.history.push(\"/login\");\r\n        }).catch(error => {\r\n            notification.error({\r\n                message: 'Polling App',\r\n                description: error.message || 'Sorry! Something went wrong. Please try again!'\r\n            });\r\n        });\r\n    }\r\n\r\n    isFormInvalid() {\r\n        return !(this.state.name.validateStatus === 'success' &&\r\n            this.state.username.validateStatus === 'success' &&\r\n            this.state.email.validateStatus === 'success' &&\r\n            this.state.password.validateStatus === 'success'\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"signup-container\">\r\n                <h1 className=\"page-title\">Ajout d'un événement ou actualité</h1>\r\n                <div className=\"signup-content\">\r\n                    <Form onSubmit={this.handleSubmit} className=\"signup-form\">\r\n                        <FormItem \r\n                            label=\"Titre :\"\r\n                            validateStatus={this.state.titre.validateStatus}\r\n                            help={this.state.titre.errorMsg}>\r\n                            <Input \r\n                                size=\"large\"\r\n                                name=\"title\"\r\n                                autoComplete=\"off\"\r\n                                placeholder=\"Titre ...\"\r\n                                value={this.state.name.value} \r\n                                onChange={(event) => this.handleInputChange(event, this.validateTitle)} />    \r\n                        </FormItem>\r\n                        <FormItem \r\n                            label=\"Description :\"\r\n                            validateStatus={this.state.description.validateStatus}\r\n                            help={this.state.description.errorMsg}>\r\n                            <Input \r\n                                size=\"large\"\r\n                                name=\"description\"\r\n                                autoComplete=\"off\"\r\n                                placeholder=\"description ...\"\r\n                                value={this.state.name.value} \r\n                                onChange={(event) => this.handleInputChange(event, this.validateDescription)} />    \r\n                        </FormItem>\r\n                        <FormItem \r\n                            label=\"Contenu :\"\r\n                            validateStatus={this.state.content.validateStatus}\r\n                            help={this.state.content.errorMsg}>\r\n                            <Input.TextArea \r\n                                size=\"large\"\r\n                                name=\"content\"\r\n                                autoComplete=\"off\"\r\n                                placeholder=\"Le contenu complet ...\"\r\n                                value={this.state.name.value} \r\n                                onChange={(event) => this.handleInputChange(event, this.validateContenu)} />    \r\n                        </FormItem>\r\n                        <FormItem \r\n                            label=\"Date de cloture :\"\r\n                            validateStatus={this.state.date.validateStatus}\r\n                            help={this.state.date.errorMsg}>\r\n                            <Input.Date\r\n                                size=\"large\"\r\n                                name=\"date\"\r\n                                autoComplete=\"off\"\r\n                                placeholder=\"La date de cloture de cet événement ...\"\r\n                                value={this.state.date.value} \r\n                                onChange={(event) => this.handleInputChange(event, this.validateDate)} />    \r\n                        </FormItem>\r\n                        <FormItem \r\n                            label=\"Image :\"\r\n                            validateStatus={this.state.file.validateStatus}\r\n                            help={this.state.file.errorMsg}>\r\n                            <Input.File\r\n                                size=\"large\"\r\n                                name=\"date\"\r\n                                autoComplete=\"off\"\r\n                                placeholder=\"Image de dimension 1280x720px ...\"\r\n                                value={this.state.file.value} \r\n                                onChange={(event) => this.handleInputChange(event, this.validateFile)} />    \r\n                        </FormItem>\r\n                        <FormItem>\r\n                            <Button type=\"primary\" \r\n                                htmlType=\"submit\" \r\n                                size=\"large\" \r\n                                className=\"signup-form-button\"\r\n                                disabled={this.isFormInvalid()}>Sign up</Button>\r\n                            Already registed? <Link to=\"/login\">Login now!</Link>\r\n                        </FormItem>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Validation Functions\r\n\r\n    validateContenu = (name) => {\r\n        if(name.length < NAME_MIN_LENGTH) {\r\n            return {\r\n                validateStatus: 'error',\r\n                errorMsg: `Name is too short (Minimum ${NAME_MIN_LENGTH} characters needed.)`\r\n            }\r\n        } else if (name.length > NAME_MAX_LENGTH) {\r\n            return {\r\n                validationStatus: 'error',\r\n                errorMsg: `Name is too long (Maximum ${NAME_MAX_LENGTH} characters allowed.)`\r\n            }\r\n        } else {\r\n            return {\r\n                validateStatus: 'success',\r\n                errorMsg: null,\r\n              };            \r\n        }\r\n    }\r\n\r\n    validateDate = (email) => {\r\n        if(!email) {\r\n            return {\r\n                validateStatus: 'error',\r\n                errorMsg: 'Email may not be empty'                \r\n            }\r\n        }\r\n\r\n        const EMAIL_REGEX = RegExp('[^@ ]+@[^@ ]+\\\\.[^@ ]+');\r\n        if(!EMAIL_REGEX.test(email)) {\r\n            return {\r\n                validateStatus: 'error',\r\n                errorMsg: 'Email not valid'\r\n            }\r\n        }\r\n\r\n        if(email.length > EMAIL_MAX_LENGTH) {\r\n            return {\r\n                validateStatus: 'error',\r\n                errorMsg: `Email is too long (Maximum ${EMAIL_MAX_LENGTH} characters allowed)`\r\n            }\r\n        }\r\n\r\n        return {\r\n            validateStatus: null,\r\n            errorMsg: null\r\n        }\r\n    }\r\n\r\n    validateDescription = (username) => {\r\n        if(username.length < USERNAME_MIN_LENGTH) {\r\n            return {\r\n                validateStatus: 'error',\r\n                errorMsg: `Username is too short (Minimum ${USERNAME_MIN_LENGTH} characters needed.)`\r\n            }\r\n        } else if (username.length > USERNAME_MAX_LENGTH) {\r\n            return {\r\n                validationStatus: 'error',\r\n                errorMsg: `Username is too long (Maximum ${USERNAME_MAX_LENGTH} characters allowed.)`\r\n            }\r\n        } else {\r\n            return {\r\n                validateStatus: null,\r\n                errorMsg: null\r\n            }\r\n        }\r\n    }\r\n\r\n    validateFile() {\r\n        // First check for client side errors in username\r\n        const usernameValue = this.state.username.value;\r\n        const usernameValidation = this.validateUsername(usernameValue);\r\n\r\n        if(usernameValidation.validateStatus === 'error') {\r\n            this.setState({\r\n                username: {\r\n                    value: usernameValue,\r\n                    ...usernameValidation\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            username: {\r\n                value: usernameValue,\r\n                validateStatus: 'validating',\r\n                errorMsg: null\r\n            }\r\n        });\r\n\r\n        checkUsernameAvailability(usernameValue)\r\n        .then(response => {\r\n            if(response.available) {\r\n                this.setState({\r\n                    username: {\r\n                        value: usernameValue,\r\n                        validateStatus: 'success',\r\n                        errorMsg: null\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    username: {\r\n                        value: usernameValue,\r\n                        validateStatus: 'error',\r\n                        errorMsg: 'This username is already taken'\r\n                    }\r\n                });\r\n            }\r\n        }).catch(error => {\r\n            // Marking validateStatus as success, Form will be recchecked at server\r\n            this.setState({\r\n                username: {\r\n                    value: usernameValue,\r\n                    validateStatus: 'success',\r\n                    errorMsg: null\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    validateEmailAvailability() {\r\n        // First check for client side errors in email\r\n        const emailValue = this.state.email.value;\r\n        const emailValidation = this.validateEmail(emailValue);\r\n\r\n        if(emailValidation.validateStatus === 'error') {\r\n            this.setState({\r\n                email: {\r\n                    value: emailValue,\r\n                    ...emailValidation\r\n                }\r\n            });    \r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            email: {\r\n                value: emailValue,\r\n                validateStatus: 'validating',\r\n                errorMsg: null\r\n            }\r\n        });\r\n\r\n        checkEmailAvailability(emailValue)\r\n        .then(response => {\r\n            if(response.available) {\r\n                this.setState({\r\n                    email: {\r\n                        value: emailValue,\r\n                        validateStatus: 'success',\r\n                        errorMsg: null\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    email: {\r\n                        value: emailValue,\r\n                        validateStatus: 'error',\r\n                        errorMsg: 'This Email is already registered'\r\n                    }\r\n                });\r\n            }\r\n        }).catch(error => {\r\n            // Marking validateStatus as success, Form will be recchecked at server\r\n            this.setState({\r\n                email: {\r\n                    value: emailValue,\r\n                    validateStatus: 'success',\r\n                    errorMsg: null\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    validatePassword = (password) => {\r\n        if(password.length < PASSWORD_MIN_LENGTH) {\r\n            return {\r\n                validateStatus: 'error',\r\n                errorMsg: `Password is too short (Minimum ${PASSWORD_MIN_LENGTH} characters needed.)`\r\n            }\r\n        } else if (password.length > PASSWORD_MAX_LENGTH) {\r\n            return {\r\n                validationStatus: 'error',\r\n                errorMsg: `Password is too long (Maximum ${PASSWORD_MAX_LENGTH} characters allowed.)`\r\n            }\r\n        } else {\r\n            return {\r\n                validateStatus: 'success',\r\n                errorMsg: null,\r\n            };            \r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signup;"]},"metadata":{},"sourceType":"module"}